---
import { getAbsoluteLocaleUrl } from 'astro:i18n';
import { languages } from '@/i18n/config';

// Get the current path without locale prefix
const currentPath = Astro.url.pathname
  .replace(/^\/(en|es)\//, '/')
  .replace(/^\//, '');

const hreflangLinks = Object.keys(languages).map((langCode) => {
  const href = getAbsoluteLocaleUrl(langCode, currentPath);
  return {
    lang: langCode,
    href,
  };
});

const defaultLangHref = getAbsoluteLocaleUrl('en', currentPath);
---

{
  hreflangLinks.map(({ lang, href }) => (
    <link rel='alternate' hreflang={lang} href={href} />
  ))
}

<link rel='alternate' hreflang='x-default' href={defaultLangHref} />
